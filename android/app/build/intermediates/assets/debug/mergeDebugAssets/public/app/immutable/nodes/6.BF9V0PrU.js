import{t as A,a as v,n as B,b as tr}from"../chunks/CGUOcUo0.js";import{i as br}from"../chunks/Dt1eVU8n.js";import{at as hr,D as xr,u as wr,au as kr,p as _r,o as Cr,c as s,t as P,a as Lr,b as c,r as i,g as e,m as k,n as Z,s as o}from"../chunks/CVH_N3Bp.js";import{l as Mr,e as S,s as or}from"../chunks/CWBwmAxe.js";import{i as _}from"../chunks/ChmHwF9y.js";import{r as q,s as sr}from"../chunks/CZ47TB2n.js";import{s as ir}from"../chunks/CCWPqyyE.js";import{g as H}from"../chunks/DF6Fe3K5.js";import{g as Er,b as Sr,a as jr,d as Pr,e as Ar,f as Br}from"../chunks/CKXrGhkk.js";import"../chunks/ChpRqV9_.js";function N(r,m,g=m){var C=hr();Mr(r,"input",l=>{var n=l?r.defaultValue:r.value;if(n=O(r)?T(n):n,g(n),C&&n!==(n=m())){var h=r.selectionStart,p=r.selectionEnd;r.value=n??"",p!==null&&(r.selectionStart=h,r.selectionEnd=Math.min(p,r.value.length))}}),(xr&&r.defaultValue!==r.value||wr(m)==null&&r.value)&&g(O(r)?T(r.value):r.value),kr(()=>{var l=m();O(r)&&l===T(r.value)||r.type==="date"&&!l&&!r.value||l!==r.value&&(r.value=l??"")})}function O(r){var m=r.type;return m==="number"||m==="range"}function T(r){return r===""?null:+r}function lr(r){return function(...m){var g=m[0];return g.preventDefault(),r==null?void 0:r.apply(this,m)}}var Gr=A('<div class="mb-4 rounded-lg bg-red-50 p-3 text-sm text-red-700 dark:bg-red-900/30 dark:text-red-400"> </div>'),Vr=A('<div class="mb-4 rounded-lg bg-green-50 p-3 text-sm text-green-700 dark:bg-green-900/30 dark:text-green-400"> </div>'),zr=B('<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path></svg>'),Fr=B('<svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>'),Wr=B('<svg class="-ml-1 mr-3 h-5 w-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Signing in...',1),Dr=A('<form class="space-y-4"><div><label for="email" class="mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300">Email address</label> <input id="email" type="email" autocomplete="email" class="focus:ring-primary-500 focus:border-primary-500 w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400" placeholder="you@example.com" required></div> <div><div class="mb-1 flex items-center justify-between"><label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Password</label> <a href="/forgot-password" class="text-primary-600 hover:text-primary-500 dark:text-primary-400 text-sm">Forgot password?</a></div> <div class="relative"><input id="password" autocomplete="current-password" class="focus:ring-primary-500 focus:border-primary-500 w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400" placeholder="••••••••" required> <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600 dark:text-gray-400 dark:hover:text-gray-300"><!></button></div></div> <button type="submit" class="bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 flex w-full justify-center rounded-lg border border-transparent px-4 py-2.5 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"><!></button></form>'),Ir=B('<svg class="-ml-1 mr-3 h-5 w-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Sending magic link...',1),Rr=A('<form class="space-y-4"><div><label for="magic-email" class="mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300">Email address</label> <input id="magic-email" type="email" autocomplete="email" class="focus:ring-primary-500 focus:border-primary-500 w-full rounded-lg border border-gray-300 px-3 py-2 shadow-sm focus:ring-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400" placeholder="you@example.com" required></div> <button type="submit" class="bg-primary-600 hover:bg-primary-700 focus:ring-primary-500 flex w-full justify-center rounded-lg border border-transparent px-4 py-2.5 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"><!></button></form>'),Zr=A('<div class="from-primary-50 to-primary-100 flex min-h-screen items-center justify-center p-4 transition-colors duration-200 dark:from-gray-900 dark:to-gray-800"><div class="w-full max-w-md transform overflow-hidden rounded-2xl bg-white shadow-xl transition-all duration-300 hover:shadow-2xl dark:bg-gray-800"><div class="px-8 pb-6 pt-8 text-center"><div class="mb-6 flex justify-center"><img src="/vibewise-logo.svg" alt="VibeWise" class="h-16"></div> <h1 class="mb-2 text-2xl font-bold text-gray-900 dark:text-white">Welcome back</h1> <p class="text-gray-600 dark:text-gray-300">Sign in to continue to your account</p></div> <div class="px-8 pt-2"><div class="flex border-b border-gray-200 dark:border-gray-700"><button>Email</button> <button>Magic Link</button></div></div> <div class="px-8 py-6"><!> <!> <!> <div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div> <div class="relative flex justify-center text-sm"><span class="bg-white px-2 text-gray-500 dark:bg-gray-800 dark:text-gray-400">Or continue with</span></div></div> <div class="space-y-3"><button class="focus:ring-primary-500 flex w-full items-center justify-center rounded-lg border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600" aria-label="Sign in with Google"><svg class="mr-2 h-5 w-5" viewBox="0 0 24 24" width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g transform="matrix(1, 0, 0, 1, 27.009001, -39.238998)"><path fill="#4285F4" d="M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.28426 53.749 C -8.52426 55.059 -9.22426 56.159 -10.3943 56.859 L -10.3943 60.329 L -6.34426 60.329 C -3.73426 57.939 -2.754 55.029 -2.754 51.509 L -3.264 51.509 Z"></path><path fill="#34A853" d="M -14.754 63.239 C -11.514 63.239 -8.80426 62.159 -6.70426 60.329 L -10.7543 56.859 C -11.8843 57.589 -13.3943 58.019 -14.754 58.019 C -17.8843 58.019 -20.5343 55.869 -21.4643 52.979 L -25.6343 52.979 L -25.6343 56.529 C -23.7143 60.439 -19.9243 63.239 -14.754 63.239 Z"></path><path fill="#FBBC05" d="M -21.4643 52.979 C -21.7343 52.189 -21.8843 51.339 -21.8843 50.439 C -21.8843 49.539 -21.7243 48.689 -21.4643 47.899 L -21.4643 44.339 L -25.6343 44.339 C -26.8943 46.779 -27.5043 49.509 -27.3643 52.979 L -21.4643 52.979 Z"></path><path fill="#EA4335" d="M -14.754 42.859 C -12.0243 42.859 -9.70426 43.799 -7.89426 45.619 L -3.52426 41.249 C -6.99426 37.939 -11.5343 36.639 -14.754 37.639 C -19.9243 37.639 -23.7143 40.439 -25.6343 44.339 L -21.4643 47.899 C -20.5343 45.009 -17.8843 42.859 -14.754 42.859 Z"></path></g></svg> Continue with Google</button></div></div> <div class="bg-gray-50 px-8 py-4 text-center dark:bg-gray-700/30"><p class="text-sm text-gray-600 dark:text-gray-300"> <a href="/signup" class="text-primary-600 hover:text-primary-500 dark:text-primary-400 font-medium">Sign up</a></p></div></div></div>');function Yr(r,m){_r(m,!1);let g=k(""),C=k(""),l=k(!1),n=k(""),h=k(""),p=k(!1),L=k("email"),G={platform:"web",isNative:!1,isPWA:!1,isMobile:!1,isStandalone:!1};Cr(async()=>{G=Er(),console.log("VibeWise login on platform:",G.platform);try{const t=await Sr();t.success&&t.user&&console.log("User authenticated via redirect")}catch(t){console.error("Error checking redirect result:",t)}const a=jr.subscribe(t=>{t.user&&H("/")});return()=>{a()}});const nr=async()=>{if(!e(g)||!e(C)){o(n,"Please enter both email and password");return}try{o(l,!0),o(n,""),await Ar(e(g),e(C)),H("/")}catch(a){console.error("Login error:",a),o(n,a.message||"Failed to sign in. Please try again.")}finally{o(l,!1)}},dr=async()=>{if(!e(g)){o(n,"Please enter your email");return}try{o(l,!0),o(n,""),await Br(e(g),window.location.href),o(h,"Check your email for the magic link to sign in!")}catch(a){console.error("Magic link error:",a),o(n,a.message||"Failed to send magic link. Please try again.")}finally{o(l,!1)}},cr=async()=>{try{if(o(l,!0),o(n,""),(await Pr()).redirecting){o(h,G.isNative?"Redirecting to Google login...":"Completing authentication...");return}H("/")}catch(a){console.error("Google sign in error:",a),o(n,a.message||"Failed to sign in with Google. Please try again.")}finally{e(h)||o(l,!1)}};br();var V=Zr(),U=s(V),z=c(s(U),2),J=s(z),F=s(J),K=c(F,2);i(J),i(z);var W=c(z,2),Q=s(W);{var gr=a=>{var t=Gr(),f=s(t,!0);i(t),P(()=>or(f,e(n))),v(a,t)};_(Q,a=>{e(n)&&a(gr)})}var X=c(Q,2);{var mr=a=>{var t=Vr(),f=s(t,!0);i(t),P(()=>or(f,e(h))),v(a,t)};_(X,a=>{e(h)&&a(mr)})}var Y=c(X,2);{var ur=a=>{var t=Dr(),f=s(t),M=c(s(f),2);q(M),i(f);var y=c(f,2),E=c(s(y),2),x=s(E);q(x);var b=c(x,2),D=s(b);{var I=d=>{var w=zr();v(d,w)},R=d=>{var w=Fr();v(d,w)};_(D,d=>{e(p)?d(I):d(R,!1)})}i(b),i(E),i(y);var u=c(y,2),j=s(u);{var pr=d=>{var w=Wr();Z(),v(d,w)},yr=d=>{var w=tr("Sign in");v(d,w)};_(j,d=>{e(l)?d(pr):d(yr,!1)})}i(u),i(t),P(()=>{sr(x,"type",e(p)?"text":"password"),sr(b,"aria-label",e(p)?"Hide password":"Show password"),u.disabled=e(l)}),N(M,()=>e(g),d=>o(g,d)),N(x,()=>e(C),d=>o(C,d)),S("click",b,()=>o(p,!e(p))),S("submit",t,lr(nr)),v(a,t)},vr=(a,t)=>{{var f=M=>{var y=Rr(),E=s(y),x=c(s(E),2);q(x),i(E);var b=c(E,2),D=s(b);{var I=u=>{var j=Ir();Z(),v(u,j)},R=u=>{var j=tr("Send Magic Link");v(u,j)};_(D,u=>{e(l)?u(I):u(R,!1)})}i(b),i(y),P(()=>b.disabled=e(l)),N(x,()=>e(g),u=>o(g,u)),S("submit",y,lr(dr)),v(M,y)};_(a,M=>{e(L)==="magic"&&M(f)},t)}};_(Y,a=>{e(L)==="email"?a(ur):a(vr,!1)})}var $=c(Y,4),rr=s($);i($),i(W);var er=c(W,2),ar=s(er),fr=s(ar);fr.nodeValue="Don't have an account?  ",Z(),i(ar),i(er),i(U),i(V),P(()=>{ir(F,1,`flex-1 rounded-none border-b-2 px-1 py-3 text-center text-sm font-medium transition-colors duration-200 ${e(L)==="email"?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-300":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),ir(K,1,`flex-1 rounded-none border-b-2 px-1 py-3 text-center text-sm font-medium transition-colors duration-200 ${e(L)==="magic"?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-300":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),rr.disabled=e(l)}),S("click",F,()=>o(L,"email")),S("click",K,()=>o(L,"magic")),S("click",rr,cr),v(r,V),Lr()}export{Yr as component};
