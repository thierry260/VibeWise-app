import{c as Oe,a as c,t as u,n as Qe}from"../chunks/DwZKRegf.js";import"../chunks/B4OBRiys.js";import{p as Ee,s as j,m as G,as as ie,ai as pe,at as ke,f as Ie,g as e,a as Te,c as r,b as o,r as t,t as M,y as Z,n as Fe}from"../chunks/BfLd7xIT.js";import{s as E,e as Pe,r as Ze}from"../chunks/D2q-kWfj.js";import{i as R}from"../chunks/CNGqELc8.js";import{s as me,c as Ae}from"../chunks/CGJ70UkG.js";import{s as Q}from"../chunks/DTh54-LU.js";import{b as Ke}from"../chunks/ruYCseK5.js";import{i as Ce}from"../chunks/DsaIGbBj.js";import{s as Xe,a as Be}from"../chunks/Dfb5LgfT.js";import{w as et,o as Ye}from"../chunks/BtKD0jUe.js";import{a as tt}from"../chunks/CRbbwQ-c.js";import{g as je,f as ge,h as $e,m as Ge,q as rt,e as st,w as He,o as at,i as nt,a as Re}from"../chunks/DuaF19nW.js";import{e as ue,i as he}from"../chunks/D2bNO8Ei.js";import{p as le}from"../chunks/VC9gmQBp.js";import{B as it}from"../chunks/Dp4Llohu.js";import{s as De}from"../chunks/Dh16Ucvd.js";const Me={currentPhase:"Green",spiralHistory:[],intention:void 0,patterns:[],lastFetched:null,loading:!1,error:null};function ot(){const{subscribe:S,set:w,update:v}=et(Me);return{subscribe:S,setJourneyData:(h,d,g)=>{v(f=>({...f,currentPhase:h,spiralHistory:d,intention:g,lastFetched:Date.now()}))},setPatterns:h=>{v(d=>({...d,patterns:h,lastFetched:Date.now()}))},setLoading:h=>{v(d=>({...d,loading:h}))},setError:h=>{v(d=>({...d,error:h}))},reset:()=>{w(Me)}}}const ne=ot(),lt=async S=>{var w,v;try{const h=je(ge,"users",S.uid,"private","summary"),d=je(ge,"users",S.uid,"journey","spiral_history"),g=je(ge,"users",S.uid,"journey","intention"),[f,b,x]=await Promise.all([$e(h),$e(d),$e(g)]),O=f.exists()&&f.data().current_spiral_phase||"Green";let L=b.exists()?((w=b.data())==null?void 0:w.entries)||[]:[];if(L.length===0&&f.exists()&&O)try{console.log("No spiral history found. Creating initial entry with phase:",O);const y=((v=f.data())==null?void 0:v.updatedAt)||new Date().toISOString();console.log("Using timestamp for initial entry:",y);const l={phase:O,entered_at:y};await Ge(d,{entries:[l]}),L=[l],console.log("Successfully initialized spiral history with entry:",l)}catch(y){console.error("Failed to initialize spiral history:",y)}else L.length===0?console.log("No spiral history and no valid summary data to initialize from."):console.log("Spiral history already exists with",L.length,"entries");const N=x.exists()&&x.data().phase===O?x.data():void 0;return{success:!0,currentPhase:O,spiralHistory:L,intention:N}}catch(h){return console.error("Error getting user journey data:",h),{success:!1,error:h}}},vt=async(S,w,v)=>{try{const h=je(ge,"users",S.uid,"journey","intention"),d={phase:w,intention:v,set_at:new Date().toISOString()};return await Ge(h,d),{success:!0}}catch(h){return console.error("Error setting user intention:",h),{success:!1,error:h}}},ct=async(S,w=60)=>{try{const v=new Date;v.setDate(v.getDate()-w);const h=rt(st(ge,"users",S.uid,"sessions"),He("type","in",["reflection","balcony"]),He("timestamp",">=",v.toISOString()),at("timestamp","desc"));let d;try{d=await nt(h)}catch(i){if(console.error("Firestore index error. You need to create the following index:",i),console.log('Please create an index for: collection("sessions").where("type", "in", ["reflection", "balcony"]).orderBy("timestamp")'),i instanceof Error&&i.message.includes("index")){const s=i.message.match(/https:\/\/console\.firebase\.google\.com[^\s]+/);s&&console.log("Create the index here:",s[0])}return{success:!0,patterns:[{type:"tag_pattern",description:"Creating Firestore index. Please try again in a few minutes.",count:0}]}}const g=[],f=[];d.forEach(i=>{const s=i.data();s.type==="reflection"?g.push(s):s.type==="balcony"&&f.push(s)});const b=je(ge,"users",S.uid,"private","summary"),x=await $e(b),O=x.exists()&&x.data().current_spiral_phase||"Green",L=[],N={};g.forEach(i=>{i.tags&&Array.isArray(i.tags)&&i.tags.forEach(s=>{N[s]=(N[s]||0)+1})}),Object.entries(N).sort((i,s)=>s[1]-i[1]).slice(0,3).forEach(([i,s])=>{L.push({type:"tag_pattern",description:`You often reflect on "${i}" during your ${O} phase.`,count:s,related_phase:O,related_tags:[i]})});const l={};f.forEach(i=>{if(i.pattern){const s=i.pattern.toLowerCase();l[s]=(l[s]||0)+1}}),Object.entries(l).sort((i,s)=>s[1]-i[1]).slice(0,2).forEach(([i,s])=>{L.push({type:"limiting_belief",description:`A recurring limiting belief: "${i}"`,count:s})});const J={};return f.forEach(i=>{if(i.truth){const s=i.truth.toLowerCase();J[s]=(J[s]||0)+1}}),Object.entries(J).sort((i,s)=>s[1]-i[1]).slice(0,2).forEach(([i,s])=>{L.push({type:"truth",description:`A recurring insight: "${i}"`,count:s})}),L.length===0&&L.push({type:"tag_pattern",description:"Continue logging reflections to reveal your patterns.",count:0}),{success:!0,patterns:L}}catch(v){return console.error("Error analyzing user patterns:",v),{success:!1,error:v,patterns:[{type:"tag_pattern",description:"Error analyzing patterns. Please try again later.",count:0}]}}},K=S=>({Beige:"#d4c5aa",Purple:"#9b59b6",Red:"#e74c3c",Blue:"#5f8eb8",Orange:"#f7a04b",Green:"#77b28c",Yellow:"#f1c40f",Turquoise:"#1abc9c"})[S]||"#77b28c",dt=S=>({Beige:"Survival-oriented, focused on immediate needs",Purple:"Tribal, magical thinking, tradition-bound",Red:"Impulsive, egocentric, heroic",Blue:"Purpose-driven, orderly, principled",Orange:"Achievement-oriented, strategic, competitive",Green:"Community-focused, egalitarian, harmony-seeking",Yellow:"Systemic, integrative, flexible",Turquoise:"Holistic, global view, compassionate"})[S]||"Exploring your current consciousness level";var pt=u('<div class="empty-state svelte-1y541v8"><p>No spiral history available yet. Continue using the app to build your journey data.</p></div>'),ut=u('<span class="current-badge svelte-1y541v8">Current</span>'),ht=u('<div><div class="timeline-dot svelte-1y541v8"></div> <div></div> <div class="timeline-content svelte-1y541v8"><h3 class="svelte-1y541v8"> </h3> <p class="timeline-date svelte-1y541v8"> </p> <p class="timeline-duration svelte-1y541v8"> <!></p></div></div>'),gt=u('<div class="vertical-timeline svelte-1y541v8"></div>'),_t=u('<div><div class="radial-dot svelte-1y541v8"></div> <div class="radial-content svelte-1y541v8"><h3 class="svelte-1y541v8"> </h3> <p class="svelte-1y541v8"> </p></div></div>'),ft=u('<div class="radial-timeline svelte-1y541v8"><div class="radial-center svelte-1y541v8"><div class="current-phase-dot svelte-1y541v8"><span> </span></div></div> <!></div>');function yt(S,w){Ee(w,!1);const v=G();let h=le(w,"spiralHistory",24,()=>[]),d=le(w,"currentPhase",8),g=le(w,"layout",8,"vertical");function f(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function b(l,P){const J=new Date(l),ee=P?new Date(P):new Date,i=Math.abs(ee.getTime()-J.getTime()),s=Math.ceil(i/(1e3*60*60*24));if(s<1)return"Less than a day";if(s===1)return"1 day";if(s<30)return`${s} days`;const W=Math.floor(s/30);if(W===1)return"1 month";if(W<12)return`${W} months`;const H=Math.floor(s/365);return H===1?"1 year":`${H} years`}let x=G(!0);Ye(()=>{const l=()=>{j(x,window.innerWidth<768||g()==="vertical")};return window.addEventListener("resize",l),l(),()=>{window.removeEventListener("resize",l)}}),ie(()=>pe(h()),()=>{j(v,[...h()].sort((l,P)=>new Date(l.entered_at).getTime()-new Date(P.entered_at).getTime()))}),ke(),Ce();var O=Oe(),L=Ie(O);{var N=l=>{var P=pt();c(l,P)},y=(l,P)=>{{var J=i=>{var s=gt();ue(s,5,()=>e(v),he,(W,H,te)=>{var a=ht();let n;var m=r(a),k=o(m,2);let p;var _=o(k,2),$=r(_),I=r($,!0);t($);var z=o($,2),A=r(z);t(z);var F=o(z,2),T=r(F),C=o(T);{var B=D=>{var V=ut();c(D,V)};R(C,D=>{e(H).phase===d()&&D(B)})}t(F),t(_),t(a),M((D,V,oe,re,_e,fe,ye)=>{n=me(a,1,"timeline-entry svelte-1y541v8",null,n,D),Q(m,`background-color: ${V??""}`),p=me(k,1,"timeline-connector svelte-1y541v8",null,p,oe),Q(k,`background-color: ${re??""}`),Q($,`color: ${_e??""}`),E(I,e(H).phase),E(A,`Entered on ${fe??""}`),E(T,`${ye??""} `)},[()=>({current:e(H).phase===d()}),()=>K(e(H).phase),()=>({last:te===e(v).length-1}),()=>K(e(H).phase),()=>K(e(H).phase),()=>f(e(H).entered_at),()=>{var D;return b(e(H).entered_at,(D=e(v)[te+1])==null?void 0:D.entered_at)}],Z),c(W,a)}),t(s),c(i,s)},ee=i=>{var s=ft(),W=r(s),H=r(W),te=r(H),a=r(te,!0);t(te),t(H),t(W);var n=o(W,2);ue(n,1,()=>e(v),he,(m,k,p)=>{var _=_t();const $=Z(()=>p*(360/e(v).length)*(Math.PI/180)),I=Z(()=>120),z=Z(()=>e(I)*Math.cos(e($))),A=Z(()=>e(I)*Math.sin(e($)));let F;var T=r(_),C=o(T,2),B=r(C),D=r(B,!0);t(B);var V=o(B,2),oe=r(V,!0);t(V),t(C),t(_),M((re,_e,fe,ye)=>{F=me(_,1,"radial-entry svelte-1y541v8",null,F,re),Q(_,`transform: translate(calc(50% + ${e(z)??""}px), calc(50% + ${e(A)??""}px))`),Q(T,`background-color: ${_e??""}`),Q(C,e($)>Math.PI?"right: 0":"left: 0"),Q(B,`color: ${fe??""}`),E(D,e(k).phase),E(oe,ye)},[()=>({current:e(k).phase===d()}),()=>K(e(k).phase),()=>K(e(k).phase),()=>f(e(k).entered_at)],Z),c(m,_)}),t(s),M(m=>{Q(H,`background-color: ${m??""}`),E(a,d())},[()=>K(d())],Z),c(i,s)};R(l,i=>{e(x)?i(J):i(ee,!1)},P)}};R(L,l=>{e(v).length===0?l(N):l(y,!1)})}c(S,O),Te()}var mt=u('<div class="empty-state svelte-7ljrwd"><p>Continue logging reflections and balcony experiments to reveal your patterns.</p></div>'),jt=u('<span class="pattern-count svelte-7ljrwd"> </span>'),wt=u('<div class="pattern-card svelte-7ljrwd"><div class="pattern-icon svelte-7ljrwd">🔒</div> <div class="pattern-content svelte-7ljrwd"><p class="svelte-7ljrwd"> </p> <!></div></div>'),bt=u('<div class="pattern-section svelte-7ljrwd"><h3 class="svelte-7ljrwd">Limiting Beliefs</h3> <div class="pattern-list svelte-7ljrwd"></div></div>'),xt=u('<span class="pattern-count svelte-7ljrwd"> </span>'),$t=u('<div class="pattern-card svelte-7ljrwd"><div class="pattern-icon svelte-7ljrwd">💡</div> <div class="pattern-content svelte-7ljrwd"><p class="svelte-7ljrwd"> </p> <!></div></div>'),St=u('<div class="pattern-section svelte-7ljrwd"><h3 class="svelte-7ljrwd">Recurring Insights</h3> <div class="pattern-list svelte-7ljrwd"></div></div>'),Pt=u('<span class="phase-tag svelte-7ljrwd"> </span>'),Dt=u('<span class="pattern-count svelte-7ljrwd"> </span>'),Et=u('<div class="pattern-card svelte-7ljrwd"><div class="pattern-icon svelte-7ljrwd">🏷️</div> <div class="pattern-content svelte-7ljrwd"><p class="svelte-7ljrwd"> </p> <!> <!></div></div>'),kt=u('<div class="pattern-section svelte-7ljrwd"><h3 class="svelte-7ljrwd">Reflection Patterns</h3> <div class="pattern-list svelte-7ljrwd"></div></div>'),It=u('<div class="pattern-card svelte-7ljrwd"><div class="pattern-icon svelte-7ljrwd">🔄</div> <div class="pattern-content svelte-7ljrwd"><p class="svelte-7ljrwd"> </p></div></div>'),Tt=u('<div class="pattern-section svelte-7ljrwd"><h3 class="svelte-7ljrwd">Phase Transitions</h3> <div class="pattern-list svelte-7ljrwd"></div></div>'),Ct=u('<div class="patterns-container svelte-7ljrwd"><!> <!> <!> <!></div>');function Lt(S,w){Ee(w,!1);const v=G(),h=G(),d=G(),g=G(),f=G();let b=le(w,"patterns",24,()=>[]);ie(()=>pe(b()),()=>{j(v,b().filter(y=>y.type==="tag_pattern"))}),ie(()=>pe(b()),()=>{j(h,b().filter(y=>y.type==="limiting_belief"))}),ie(()=>pe(b()),()=>{j(d,b().filter(y=>y.type==="truth"))}),ie(()=>pe(b()),()=>{j(g,b().filter(y=>y.type==="phase_transition"))}),ie(()=>pe(b()),()=>{j(f,b().length>0)}),ke(),Ce();var x=Oe(),O=Ie(x);{var L=y=>{var l=mt();c(y,l)},N=y=>{var l=Ct(),P=r(l);{var J=a=>{var n=bt(),m=o(r(n),2);ue(m,5,()=>e(h),he,(k,p)=>{var _=wt(),$=o(r(_),2),I=r($),z=r(I,!0);t(I);var A=o(I,2);{var F=T=>{var C=jt(),B=r(C);t(C),M(()=>E(B,`Observed ${e(p).count??""} times`)),c(T,C)};R(A,T=>{e(p).count>1&&T(F)})}t($),t(_),M(()=>E(z,e(p).description)),c(k,_)}),t(m),t(n),c(a,n)};R(P,a=>{e(h).length>0&&a(J)})}var ee=o(P,2);{var i=a=>{var n=St(),m=o(r(n),2);ue(m,5,()=>e(d),he,(k,p)=>{var _=$t(),$=o(r(_),2),I=r($),z=r(I,!0);t(I);var A=o(I,2);{var F=T=>{var C=xt(),B=r(C);t(C),M(()=>E(B,`Observed ${e(p).count??""} times`)),c(T,C)};R(A,T=>{e(p).count>1&&T(F)})}t($),t(_),M(()=>E(z,e(p).description)),c(k,_)}),t(m),t(n),c(a,n)};R(ee,a=>{e(d).length>0&&a(i)})}var s=o(ee,2);{var W=a=>{var n=kt(),m=o(r(n),2);ue(m,5,()=>e(v),he,(k,p)=>{var _=Et(),$=o(r(_),2),I=r($),z=r(I,!0);t(I);var A=o(I,2);{var F=B=>{var D=Pt(),V=r(D,!0);t(D),M((oe,re)=>{Q(D,`background-color: ${oe??""}20; color: ${re??""}`),E(V,e(p).related_phase)},[()=>K(e(p).related_phase),()=>K(e(p).related_phase)],Z),c(B,D)};R(A,B=>{e(p).related_phase&&B(F)})}var T=o(A,2);{var C=B=>{var D=Dt(),V=r(D);t(D),M(()=>E(V,`Observed ${e(p).count??""} times`)),c(B,D)};R(T,B=>{e(p).count>1&&B(C)})}t($),t(_),M(()=>E(z,e(p).description)),c(k,_)}),t(m),t(n),c(a,n)};R(s,a=>{e(v).length>0&&a(W)})}var H=o(s,2);{var te=a=>{var n=Tt(),m=o(r(n),2);ue(m,5,()=>e(g),he,(k,p)=>{var _=It(),$=o(r(_),2),I=r($),z=r(I,!0);t(I),t($),t(_),M(()=>E(z,e(p).description)),c(k,_)}),t(m),t(n),c(a,n)};R(H,a=>{e(g).length>0&&a(te)})}t(l),c(y,l)};R(O,y=>{e(f)?y(N,!1):y(L)})}c(S,x),Te()}var zt=Qe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg>');function Ft(S,w){let v=le(w,"size",8,24),h=le(w,"strokeWidth",8,1.5),d=le(w,"class_",8,"");var g=zt();M(()=>{De(g,"width",v()),De(g,"height",v()),De(g,"stroke-width",h()),me(g,0,Ae(d()))}),c(S,g)}var Bt=u('<div class="loading-container svelte-1gj736a"><div class="loading-spinner svelte-1gj736a"></div> <p>Authenticating...</p></div>'),Ht=u('<div class="loading-container svelte-1gj736a"><div class="loading-spinner svelte-1gj736a"></div> <p>Loading your journey data...</p></div>'),Rt=u('<div class="error-container svelte-1gj736a"><p> </p> <button class="svelte-1gj736a">Try Again</button></div>'),Mt=u('<div class="intention-display svelte-1gj736a"><div class="intention-header svelte-1gj736a"><p class="intention-text svelte-1gj736a"> </p> <!></div> <p class="intention-meta svelte-1gj736a"> </p></div>'),Ot=u('<p class="error-text svelte-1gj736a"> </p>'),At=u('<button class="cancel-button svelte-1gj736a">Cancel</button>'),Yt=u('<div class="intention-form svelte-1gj736a"><p class="intention-prompt svelte-1gj736a"> </p> <textarea placeholder="e.g., Practice compassionate listening" rows="3"></textarea> <!> <div class="button-group svelte-1gj736a"><!> <button class="save-button svelte-1gj736a">Save Intention</button></div></div>'),Gt=u('<div class="spiral-placeholder svelte-1gj736a"><div class="spiral-message svelte-1gj736a"><h3 class="svelte-1gj736a">No History Yet</h3> <p>Continue using VibeWise to build your spiral journey data.</p> <p>Your current phase is <span> </span>.</p></div></div>'),Ut=u('<div class="spiral-visualization svelte-1gj736a"><!></div>'),Nt=u('<div class="current-phase svelte-1gj736a"><h2 class="svelte-1gj736a">Current Phase: <span class="phase-name svelte-1gj736a"> </span></h2> <div class="phase-description svelte-1gj736a"><p class="svelte-1gj736a"> </p></div> <p class="color-gray-100 text-xs">Track your growth through the Spiral Dynamics model</p></div> <div class="intention-section svelte-1gj736a"><h2 class="svelte-1gj736a">Your Intention</h2> <!></div> <div class="journey-map svelte-1gj736a"><h2 class="svelte-1gj736a">Your Spiral Timeline</h2> <!></div> <div class="journey-insights svelte-1gj736a"><h2 class="svelte-1gj736a">Insights & Patterns</h2> <div class="insights-content svelte-1gj736a"><!></div></div>',1),Jt=u('<div class="journey-container svelte-1gj736a"><header class="journey-header svelte-1gj736a"></header> <!></div>');function cr(S,w){Ee(w,!1);const[v,h]=Xe(),d=()=>Be(ne,"$journeyStore",v),g=()=>Be(Re,"$authStore",v),f=G(),b=G(),x=G(),O=G(),L=G(),N=G();let y=G(!1),l=G(""),P=G("");async function J(a=!1){if(!g().user||g().loading){console.log("Auth not ready yet, waiting...");return}if(!a&&d().lastFetched&&e(b).length>0){console.log("Using cached journey data");return}try{ne.setLoading(!0),ne.setError(null);const n=await lt(g().user);n.success?(ne.setJourneyData(n.currentPhase||"Green",n.spiralHistory||[],n.intention),n.intention&&j(l,n.intention.intention)):(console.error("Failed to fetch journey data:",n.error),ne.setError(new Error("Failed to fetch journey data")));const m=await ct(g().user);m.success&&m.patterns?ne.setPatterns(m.patterns):console.error("Failed to analyze patterns:",m.error)}catch(n){console.error("Error in fetchJourneyData:",n),ne.setError(n instanceof Error?n:new Error("Unknown error"))}finally{ne.setLoading(!1)}}async function ee(){if(g().user){if(!e(l).trim()){j(P,"Please enter an intention");return}try{const a=await vt(g().user,e(f),e(l).trim());a.success?(j(x,{phase:e(f),intention:e(l).trim(),set_at:new Date().toISOString()}),j(y,!1),j(P,"")):(console.error("Failed to save intention:",a.error),j(P,"Failed to save intention"))}catch(a){console.error("Error in saveIntention:",a),j(P,"An error occurred")}}}function i(a){return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}Ye(()=>{if(g().user)g().user.displayName,J();else{const a=Re.subscribe(n=>{n.user&&!n.loading&&(n.user.displayName,J(),a())})}}),tt(()=>{const a=d().lastFetched?Date.now()-d().lastFetched>3e5:!0;g().user&&!g().loading&&(a||e(b).length===0)&&(console.log("Refetching journey data after navigation"),J(!0))}),ie(()=>(e(f),e(b),e(x),e(O),e(L),e(N),d()),()=>{(a=>{let{currentPhase:n,spiralHistory:m,intention:k,patterns:p,loading:_,error:$}=a;j(f,n),j(b,m),j(x,k),j(O,p),j(L,_),j(N,$)})(d())}),ie(()=>(e(x),e(y)),()=>{e(x)&&!e(y)&&j(l,e(x).intention||"")}),ke(),Ce();var s=Jt(),W=o(r(s),2);{var H=a=>{var n=Bt();c(a,n)},te=(a,n)=>{{var m=p=>{var _=Ht();c(p,_)},k=(p,_)=>{{var $=z=>{var A=Rt(),F=r(A),T=r(F);t(F);var C=o(F,2);t(A),M(()=>E(T,`Error loading journey data: ${e(N).message??""}`)),Pe("click",C,()=>J(!0)),c(z,A)},I=z=>{var A=Nt(),F=Ie(A),T=r(F),C=o(r(T)),B=r(C,!0);t(C),t(T);var D=o(T,2),V=r(D),oe=r(V,!0);t(V),t(D),Fe(2),t(F);var re=o(F,2),_e=o(r(re),2);{var fe=U=>{var Y=Mt(),q=r(Y),ae=r(q),X=r(ae);t(ae);var ve=o(ae,2);it(ve,{variant:"ghost",size:"icon",icon:Ft,ariaLabel:"Edit Intention",$$events:{click:()=>j(y,!0)}}),t(q);var ce=o(q,2),we=r(ce);t(ce),t(Y),M(be=>{E(X,`"${e(x).intention??""}"`),E(we,`Set on ${be??""}`)},[()=>i(e(x).set_at)],Z),c(U,Y)},ye=U=>{var Y=Yt(),q=r(Y),ae=r(q);t(q);var X=o(q,2);Ze(X);var ve=o(X,2);{var ce=se=>{var de=Ot(),xe=r(de,!0);t(de),M(()=>E(xe,e(P))),c(se,de)};R(ve,se=>{e(P)&&se(ce)})}var we=o(ve,2),be=r(we);{var We=se=>{var de=At();Pe("click",de,()=>{var xe;j(y,!1),j(l,((xe=e(x))==null?void 0:xe.intention)||""),j(P,"")}),c(se,de)};R(be,se=>{e(x)&&se(We)})}var Ve=o(be,2);t(we),t(Y),M(()=>{E(ae,`What is your conscious intention during this ${e(f)??""} phase?`),me(X,1,Ae(e(P)?"error":""),"svelte-1gj736a")}),Ke(X,()=>e(l),se=>j(l,se)),Pe("click",Ve,ee),c(U,Y)};R(_e,U=>{e(x)&&!e(y)?U(fe):U(ye,!1)})}t(re);var Se=o(re,2),Ue=o(r(Se),2);{var Ne=U=>{var Y=Gt(),q=r(Y),ae=o(r(q),4),X=o(r(ae)),ve=r(X,!0);t(X),Fe(),t(ae),t(q),t(Y),M(ce=>{Q(X,`color: ${ce??""}`),E(ve,e(f))},[()=>K(e(f))],Z),c(U,Y)},Je=U=>{var Y=Ut(),q=r(Y);yt(q,{get spiralHistory(){return e(b)},get currentPhase(){return e(f)},layout:"vertical"}),t(Y),c(U,Y)};R(Ue,U=>{e(b).length===0?U(Ne):U(Je,!1)})}t(Se);var Le=o(Se,2),ze=o(r(Le),2),qe=r(ze);Lt(qe,{get patterns(){return e(O)}}),t(ze),t(Le),M((U,Y,q)=>{Q(F,`border-left: 4px solid ${U??""}`),Q(C,`color: ${Y??""}`),E(B,e(f)),E(oe,q)},[()=>K(e(f)),()=>K(e(f)),()=>dt(e(f))],Z),c(z,A)};R(p,z=>{e(N)?z($):z(I,!1)},_)}};R(a,p=>{e(L)?p(m):p(k,!1)},n)}};R(W,a=>{g().loading?a(H):a(te,!1)})}t(s),c(S,s),Te(),h()}export{cr as component};
