const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/CiNr0HXD.js","../chunks/DOsK5eWY.js","../chunks/Dp1pzeXC.js"])))=>i.map(i=>d[i]);
import{t as F,a as B,b as Ie}from"../chunks/DCf4MLEm.js";import"../chunks/Br8XnZlm.js";import{p as At,ao as tt,ap as kt,ac as Mt,b as Ut,s as g,m as x,e as n,c as e,g as s,r as t,n as be,t as he,d as st}from"../chunks/BtKWLSPg.js";import{e as pe,s as f}from"../chunks/BG1n1Yyg.js";import{i as L}from"../chunks/grgeRSmy.js";import{s as ae}from"../chunks/Dzn52TgT.js";import{s as at}from"../chunks/DbU9Z9vP.js";import{t as Be,f as He}from"../chunks/DAoR_gdv.js";import{b as Lt}from"../chunks/BKn3_SA0.js";import{i as $t}from"../chunks/BYQBo7FT.js";import{s as Ft,a as me}from"../chunks/D4asRrhy.js";import{g as re,w as Ue,o as Gt,a as Ot}from"../chunks/RUtFCPZu.js";import{g as Ve}from"../chunks/U7y0OYIa.js";import{a as Nt}from"../chunks/Cb8aidWk.js";import{D as qt,i as zt,d as rt}from"../chunks/DMkWsCPx.js";import{i as Wt}from"../chunks/BTsfAa0b.js";import{_ as Le}from"../chunks/Dp1pzeXC.js";import{g as Ae,c as jt,u as Jt}from"../chunks/D1yjbSCK.js";const ge=()=>typeof window.Capacitor<"u";console.log("Environment check:",{isCapacitor:ge(),hasWebBluetooth:typeof navigator<"u"&&"bluetooth"in navigator});const H=Ue({connected:!1,deviceName:"",deviceId:"",error:null,scanning:!1}),fe=Ue({heartRate:0,rmssd:0,vibeScore:0,rrIntervals:[],chartData:[]}),$=Ue({startTime:0,currentTime:0,elapsedSeconds:0,isRunning:!1}),ke=()=>ge()?!0:typeof navigator<"u"&&"bluetooth"in navigator,Kt=async()=>{var l;try{if(!ke())throw new Error("Bluetooth is not supported on this device");if(H.update(a=>({...a,scanning:!0,error:null})),console.log("Starting BLE scan..."),ge()){console.log("Using Capacitor BLE implementation");try{const{BleClient:a}=await Le(async()=>{const{BleClient:o}=await import("../chunks/CiNr0HXD.js");return{BleClient:o}},__vite__mapDeps([0,1,2]),import.meta.url);console.log("Initializing BLE client..."),await a.initialize();const r=await a.isEnabled();if(console.log("Bluetooth enabled:",r),!r)try{await a.enable(),console.log("Bluetooth enabled successfully")}catch(o){throw console.error("Failed to enable Bluetooth:",o),new Error("Please enable Bluetooth to connect to your device")}console.log("Requesting device...");const m=await a.requestDevice({services:["0000180d-0000-1000-8000-00805f9b34fb"],namePrefix:"Polar"});return console.log("Device selected:",m),await Qt(m.deviceId,m.name||"Polar Device"),{success:!0}}catch(a){throw console.error("Capacitor BLE error:",a),a}}else{if(console.log("Using Web Bluetooth API implementation"),!("bluetooth"in navigator))throw new Error("Web Bluetooth is not supported in this browser");console.log("Requesting device...");const a=await navigator.bluetooth.requestDevice({filters:[{services:["heart_rate"]},{namePrefix:"Polar"}],optionalServices:["heart_rate"]});console.log("Device selected:",a.name),H.update(b=>({...b,deviceName:a.name||"Unknown Device",deviceId:a.id})),console.log("Connecting to GATT server...");const r=await((l=a.gatt)==null?void 0:l.connect());if(!r)throw new Error("Failed to connect to GATT server");console.log("Getting Heart Rate service...");const m=await r.getPrimaryService("heart_rate");console.log("Getting Heart Rate Measurement characteristic...");const o=await m.getCharacteristic("heart_rate_measurement");return console.log("Starting notifications..."),await o.startNotifications(),console.log("Adding event listener for heart rate measurements..."),o.addEventListener("characteristicvaluechanged",Yt),H.update(b=>({...b,connected:!0,scanning:!1})),a.addEventListener("gattserverdisconnected",()=>{console.log("Device disconnected"),H.update(_=>({..._,connected:!1,error:new Error("Device disconnected")})),re($).isRunning&&$e()}),{success:!0}}}catch(a){return console.error("BLE scan error:",a),H.update(r=>({...r,scanning:!1,error:a instanceof Error?a:new Error("Unknown BLE error")})),{success:!1,error:a instanceof Error?a:new Error("Unknown BLE error")}}};async function Qt(l,a){try{console.log("Connecting to Capacitor device:",l,a);const{BleClient:r}=await Le(async()=>{const{BleClient:b}=await import("../chunks/CiNr0HXD.js");return{BleClient:b}},__vite__mapDeps([0,1,2]),import.meta.url);console.log("Establishing connection..."),await r.connect(l),console.log("Connected successfully"),H.update(b=>({...b,deviceName:a,deviceId:l,connected:!0,scanning:!1}));const m="0000180d-0000-1000-8000-00805f9b34fb",o="00002a37-0000-1000-8000-00805f9b34fb";console.log("Starting notifications for heart rate..."),await r.startNotifications(l,m,o,b=>{const _=new DataView(b.buffer);Xt(_)}),console.log("Notifications started successfully"),ot()}catch(r){console.error("Error connecting to Capacitor device:",r),H.update(m=>({...m,connected:!1,scanning:!1,error:r instanceof Error?r:new Error("Failed to connect to device")}))}}function Xt(l){const a=l.getUint8(0),r=a&1,m=r?l.getUint16(1,!0):l.getUint8(1),o=[];if(a&16){const b=r?3:2;for(let _=b;_<l.byteLength;_+=2){const E=l.getUint16(_,!0)/1024*1e3;o.push(E)}}nt(m,o)}const Yt=l=>{const a=l.target.value;if(!a)return;const r=a.getUint8(0),m=r&1,o=m?a.getUint16(1,!0):a.getUint8(1),b=[];if(r&16){const _=m?3:2;for(let E=_;E<a.byteLength;E+=2){const w=a.getUint16(E,!0)/1024*1e3;b.push(w)}}nt(o,b)},nt=(l,a)=>{fe.update(r=>{const o=[...r.rrIntervals,...a].slice(-64);let b=0;if(o.length>1){let V=0;for(let A=1;A<o.length;A++){const G=o[A]-o[A-1];V+=G*G}b=Math.sqrt(V/(o.length-1))}const E=re($).isRunning?6:void 0,w=jt(b,o,E),h=new Date().toISOString(),W=[...r.chartData,{timestamp:h,hr:l,rmssd:b,vibe:w}].slice(-300);return{heartRate:l,rmssd:b,vibeScore:w,rrIntervals:o,chartData:W}})},Pe=async()=>{try{const l=re(H).deviceId;if(l&&ge())try{const{BleClient:a}=await Le(async()=>{const{BleClient:r}=await import("../chunks/CiNr0HXD.js");return{BleClient:r}},__vite__mapDeps([0,1,2]),import.meta.url);await a.disconnect(l)}catch(a){console.error("Error disconnecting from Capacitor device:",a)}return H.set({connected:!1,deviceName:"",deviceId:"",error:null,scanning:!1}),Me(),$e(),{success:!0}}catch(l){return console.error("BLE disconnect error:",l),{success:!1,error:l instanceof Error?l:new Error("Unknown BLE error")}}},Me=()=>{fe.set({heartRate:0,rmssd:0,vibeScore:0,rrIntervals:[],chartData:[]})},ot=()=>{const l=Date.now();$.set({startTime:l,currentTime:l,elapsedSeconds:0,isRunning:!0});const a=setInterval(()=>{$.update(r=>{if(!r.isRunning)return clearInterval(a),r;const m=Date.now(),o=Math.floor((m-r.startTime)/1e3);return{...r,currentTime:m,elapsedSeconds:o}})},1e3)},$e=()=>{$.update(l=>({...l,isRunning:!1}))},Zt=()=>{const l=re($),a=re(fe),r=a.chartData;let m=0,o=0,b=0;r.forEach(T=>{m+=T.hr,o+=T.rmssd,b+=T.vibe});const _=r.length?Math.round(m/r.length):0,E=r.length?Math.round(o/r.length*10)/10:0,w=r.length?Math.round(b/r.length):0,h=Ae(w);return{startTime:new Date(l.startTime).toISOString(),endTime:new Date(l.currentTime).toISOString(),durationSeconds:l.elapsedSeconds,avgHR:_,avgRMSSD:E,avgVibe:w,vibeInterpretation:h,chartData:r,rrIntervals:a.rrIntervals}};var es=F('<div class="error-message svelte-131ts6b"> </div>'),ts=F('<div class="compatibility-warning svelte-131ts6b"><p class="svelte-131ts6b">Bluetooth is not supported on this device.</p> <p class="svelte-131ts6b">Please use a device with Bluetooth support or the mobile app.</p></div>'),ss=F(`<div class="start-session svelte-131ts6b"><p class="instructions svelte-131ts6b">Connect your Polar H10 heart rate monitor to begin tracking your heart rate variability
				(HRV). This will help calculate your Vibe Score and track your physiological balance.</p> <!> <button class="start-button svelte-131ts6b">Connect to Polar H10</button> <!></div>`),as=F('<div class="session-active svelte-131ts6b"><div class="status-bar svelte-131ts6b"><div class="connection-status svelte-131ts6b"><span></span> <span class="svelte-131ts6b"> </span></div> <div class="session-timer svelte-131ts6b"> </div></div> <div class="session-container svelte-131ts6b"><div class="metrics-container svelte-131ts6b"><div class="metric svelte-131ts6b"><h3 class="svelte-131ts6b">Heart Rate</h3> <p class="value svelte-131ts6b"> <span class="unit svelte-131ts6b">BPM</span></p></div> <div class="metric svelte-131ts6b"><h3 class="svelte-131ts6b">Balance</h3> <p class="value svelte-131ts6b"> <span class="unit svelte-131ts6b">ms</span></p></div> <div class="metric svelte-131ts6b"><h3 class="svelte-131ts6b">Vibe Score</h3> <p class="value svelte-131ts6b"> </p></div></div> <div class="timer-container svelte-131ts6b"><p class="timer svelte-131ts6b"> </p></div> <div class="chart-section svelte-131ts6b"><h3 class="mb-2 text-xl font-semibold svelte-131ts6b">Real-time HRV Data</h3> <div class="chart-container svelte-131ts6b"></div> <div class="custom-legend svelte-131ts6b"><div class="legend-item svelte-131ts6b"><div class="legend-dot hr-dot svelte-131ts6b"></div> <span class="legend-label svelte-131ts6b">Heart Rate</span> <span> </span></div> <div class="legend-item svelte-131ts6b"><div class="legend-dot rmssd-dot svelte-131ts6b"></div> <span class="legend-label svelte-131ts6b">Balance</span> <span> </span></div> <div class="legend-item svelte-131ts6b"><div class="legend-dot vibe-dot svelte-131ts6b"></div> <span class="legend-label svelte-131ts6b">Vibe Score</span> <span> </span></div></div> <div class="vibe-score-container svelte-131ts6b"><div class="vibe-score-circle svelte-131ts6b"><div class="vibe-score-value svelte-131ts6b"> </div> <div class="vibe-score-label svelte-131ts6b">Vibe Score</div></div> <div class="vibe-score-interpretation svelte-131ts6b"><div class="interpretation-emoji svelte-131ts6b"> </div> <div class="interpretation-text svelte-131ts6b"> </div></div></div></div> <div class="breathing-guide-section svelte-131ts6b"><h3 class="mb-3 text-xl font-semibold svelte-131ts6b">Breathing Guide</h3> <p class="mb-3 text-sm text-gray-500 svelte-131ts6b">Follow the rhythm</p> <div class="breathing-guide-container svelte-131ts6b"><div class="breathing-pulse-ring svelte-131ts6b"></div> <div><div class="breathing-text svelte-131ts6b"> </div> <div class="breathing-timer svelte-131ts6b"> </div></div> <div class="breathing-ripple svelte-131ts6b"></div></div></div> <div class="button-container svelte-131ts6b"><button class="stop-button svelte-131ts6b">Stop Session</button></div></div></div>'),rs=F('<div class="error-message svelte-131ts6b"> </div>'),ns=F('<div class="modal-overlay svelte-131ts6b"><div class="summary-modal svelte-131ts6b"><h2 class="svelte-131ts6b">Session Summary</h2> <div class="summary-stats svelte-131ts6b"><div class="summary-stat svelte-131ts6b"><span class="stat-label svelte-131ts6b">Duration</span> <span class="stat-value svelte-131ts6b"> </span></div> <div class="summary-stat svelte-131ts6b"><span class="stat-label svelte-131ts6b">Avg Heart Rate</span> <span class="stat-value svelte-131ts6b"> </span></div> <div class="summary-stat svelte-131ts6b"><span class="stat-label svelte-131ts6b">Avg Balance (RMSSD)</span> <span class="stat-value svelte-131ts6b"> </span></div> <div class="summary-stat svelte-131ts6b"><span class="stat-label svelte-131ts6b">Vibe Score</span> <span class="stat-value svelte-131ts6b"> </span></div></div> <!> <div class="summary-actions svelte-131ts6b"><button class="save-button svelte-131ts6b"><!></button> <button class="discard-button svelte-131ts6b">Discard Session</button></div></div></div>'),os=F('<div class="hrv-session-container svelte-131ts6b"><h1 class="svelte-131ts6b">HRV Session</h1> <!> <!></div> <!>',1);function Rs(l,a){At(a,!1);const[r,m]=Ft(),o=()=>me(fe,"$hrvData",r),b=()=>me($,"$sessionTimer",r),_=()=>me(Nt,"$authStore",r),E=()=>me(H,"$bleConnectionStatus",r);let w=x(),h=null,T=x("inhale"),W=x(0),V=null,A=x(!1),G=x(!1),S=x(null),O=x(null),j=x(null),J=x(!1),ne=x(!1),k=x({hr:"-",rmssd:"-",vibe:"-"}),_e=x(Ae(0));function Fe(){if(!s(w))return console.error("Chart element not found"),null;console.log("Initializing chart with element:",s(w));const c={width:s(w).clientWidth,height:240,padding:[20,0,0,0],cursor:{show:!0,points:{show:!1},drag:{setScale:!1},focus:{prox:30},dataIdx:(u,v,d)=>{if(d!==null){const i=u.data;g(k,{hr:i[1][d]!==null?i[1][d].toFixed(0)+" bpm":"-",rmssd:i[2][d]!==null?i[2][d].toFixed(1)+" ms":"-",vibe:i[3][d]!==null?i[3][d].toFixed(0):"-"})}return d}},legend:{show:!1},series:[{},{scale:"hr",label:"Heart Rate",value:(u,v)=>v==null?"-":v.toFixed(0)+" bpm",stroke:"rgba(229, 57, 53, 0.8)",width:2,points:{show:!1},spanGaps:!0},{scale:"rmssd",label:"Balance",value:(u,v)=>v==null?"-":v.toFixed(1)+" ms",stroke:"rgba(77, 68, 179, 0.8)",width:2,points:{show:!1},spanGaps:!0},{scale:"vibe",label:"Vibe Score",value:(u,v)=>v==null?"-":v.toFixed(0),stroke:"rgba(191, 70, 154, 0.8)",width:2,points:{show:!1},spanGaps:!0}],scales:{x:{time:!0,auto:!1,range:(u,v,d)=>{const i=Date.now()/1e3;return[i-120,i]}},hr:{auto:!0,range:[40,180]},rmssd:{auto:!0,range:[0,100]},vibe:{auto:!0,range:[0,100]}},axes:[]};try{console.log("Creating uPlot instance with options:",c),h=new Jt(c,[[],[],[],[]],s(w)),console.log("Chart created successfully:",h),h&&h.hooks&&h.hooks.setData&&h.hooks.setData.push(()=>{var u,v,d;if(h){const i=h.data[0].length-1;i>=0&&g(k,{hr:h.data[1][i]!==null?(((u=h.data[1][i])==null?void 0:u.toString())||"-")+" bpm":"-",rmssd:h.data[2][i]!==null?(((v=h.data[2][i])==null?void 0:v.toString())||"-")+" ms":"-",vibe:h.data[3][i]!==null&&((d=h.data[3][i])==null?void 0:d.toString())||"-"})}})}catch(u){return console.error("Error creating chart:",u),null}const p=new ResizeObserver(u=>{h&&u[0]&&h.setSize({width:u[0].contentRect.width,height:240})});return p.observe(s(w)),()=>{h&&(h.destroy(),h=null),p.disconnect()}}function it(){if(!h)if(console.warn("Cannot update chart: chart instance is null"),s(w)&&!h){if(console.log("Attempting to reinitialize chart..."),Fe(),!h)return}else return;const c=o().chartData;if(c.length===0){console.log("No chart data available yet");return}console.log("Updating chart with data points:",c.length);const p=c.map(i=>new Date(i.timestamp).getTime()/1e3),u=c.map(i=>i.hr),v=c.map(i=>i.rmssd),d=c.map(i=>i.vibe);try{h.setData([p,u,v,d]),console.log("Chart updated successfully")}catch(i){console.error("Error updating chart:",i)}}function lt(){let v="inhale",d=0,i=Date.now();V=setInterval(()=>{const P=Date.now(),y=P-i;i=P,v==="inhale"?(d+=y/4e3*100,d>=100&&(d=0,v="exhale")):(d+=y/6e3*100,d>=100&&(d=0,v="inhale")),g(T,v),g(W,d)},16)}function Ge(){V&&(clearInterval(V),V=null)}async function ct(){var c;if(g(O,null),!ke()){g(O,"Bluetooth is not supported on this device. Please use a device with Bluetooth support.");return}try{const p=await Kt();p.success?(b().isRunning||ot(),lt(),Me(),g(A,!0)):g(O,((c=p.error)==null?void 0:c.message)||"Failed to connect to device.")}catch(p){console.error("Error starting session:",p),g(O,p instanceof Error?p.message:"An unknown error occurred.")}}async function vt(){if(!(!_().user||!s(S))){g(J,!0),g(j,null);try{const c={timestamp:new Date().toISOString(),start:s(S).startTime,end:s(S).endTime,duration_seconds:s(S).durationSeconds,avg_hr:s(S).avgHR,avg_rmssd:s(S).avgRMSSD,vibe_score:s(S).avgVibe,vibe_interpretation:s(S).vibeInterpretation,chart_data:s(S).chartData,rr_intervals:s(S).rrIntervals};if((await Wt(_().user,c)).success)if(g(ne,!0),await zt(_().user)){const v=rt.showRandomTool();v&&await rt.logToolInteraction(_().user,v.id,"shown")}else setTimeout(()=>{Ve("/history")},2e3);else g(j,"Failed to save HRV session. Please try again.")}catch(c){console.error("Error saving HRV session:",c),g(j,"An unexpected error occurred. Please try again.")}finally{g(J,!1)}}}function dt(){$e(),Ge(),g(S,Zt()),g(G,!0)}function ut(){Me(),g(A,!1),g(G,!1),g(S,null),Pe(),Ve("/home")}function Se(c){const p=Math.floor(c/60),u=c%60;return`${p}:${u.toString().padStart(2,"0")}`}Gt(()=>{const c=Fe();return()=>{c==null||c(),Ge(),Pe()}}),Ot(()=>{V&&clearInterval(V),Pe()}),tt(()=>o(),()=>{g(_e,Ae(o().vibeScore))}),tt(()=>o(),()=>{o().chartData.length>0&&(console.log("HRV data updated, chart data points:",o().chartData.length),it())}),kt(),$t();var Oe=os(),we=Mt(Oe),Ne=n(e(we),2);{var bt=c=>{var p=ss(),u=n(e(p),2);{var v=y=>{var C=es(),K=e(C,!0);t(C),he(()=>f(K,s(O))),B(y,C)};L(u,y=>{s(O)&&y(v)})}var d=n(u,2),i=n(d,2);{var P=y=>{var C=ts();B(y,C)};L(i,y=>{ke()||y(P)})}t(p),pe("click",d,ct),B(c,p)},ht=c=>{var p=as(),u=e(p),v=e(u),d=e(v);let i;var P=n(d,2),y=e(P,!0);t(P),t(v);var C=n(v,2),K=e(C,!0);t(C),t(u);var N=n(u,2),q=e(N),Q=e(q),X=n(e(Q),2),oe=e(X);be(),t(X),t(Q);var Y=n(Q,2),Z=n(e(Y),2),ye=e(Z);be(),t(Z),t(Y);var ee=n(Y,2),M=n(e(ee),2),De=e(M,!0);t(M),t(ee),t(q);var te=n(q,2),ie=e(te),le=e(ie,!0);t(ie),t(te);var D=n(te,2),R=n(e(D),2);Lt(R,Ce=>g(w,Ce),()=>s(w));var U=n(R,2),se=e(U),I=n(e(se),4);let z;var ft=e(I,!0);t(I),t(se);var Ee=n(se,2),ce=n(e(Ee),4);let qe;var _t=e(ce,!0);t(ce),t(Ee);var ze=n(Ee,2),ve=n(e(ze),4);let We;var St=e(ve,!0);t(ve),t(ze),t(U);var je=n(U,2),de=e(je),Je=e(de),wt=e(Je,!0);t(Je),be(2),t(de);var Ke=n(de,2),Re=e(Ke),yt=e(Re,!0);t(Re);var Qe=n(Re,2),Dt=e(Qe,!0);t(Qe),t(Ke),t(je),t(D);var xe=n(D,2),Xe=n(e(xe),4),ue=n(e(Xe),2);let Ye;var Te=e(ue),Et=e(Te,!0);t(Te);var Ze=n(Te,2),Rt=e(Ze,!0);t(Ze),t(ue),be(2),t(Xe),t(xe);var et=n(xe,2),xt=e(et);t(et),t(N),t(p),he((Ce,Tt,Ct,It,Bt,Ht,Vt,Pt)=>{i=ae(d,1,"status-indicator svelte-131ts6b",null,i,Ce),f(y,E().connected?`Connected to ${E().deviceName}`:"Disconnected"),f(K,Tt),f(oe,`${o().heartRate??""} `),f(ye,`${Ct??""} `),f(De,o().vibeScore),f(le,It),z=ae(I,1,"legend-value svelte-131ts6b",null,z,Bt),f(ft,s(k).hr),qe=ae(ce,1,"legend-value svelte-131ts6b",null,qe,Ht),f(_t,s(k).rmssd),We=ae(ve,1,"legend-value svelte-131ts6b",null,We,Vt),f(St,s(k).vibe),at(de,`--progress: ${o().vibeScore??""}%`),f(wt,o().vibeScore),f(yt,s(_e).emoji),f(Dt,s(_e).label),Ye=ae(ue,1,"breathing-circle svelte-131ts6b",null,Ye,Pt),at(ue,`transform: scale(${s(T)==="inhale"?.4+s(W)/100*.6:1-s(W)/100*.8})`),f(Et,s(T)==="inhale"?"In":"Out"),f(Rt,s(T)==="inhale"?"4s":"6s")},[()=>({connected:E().connected}),()=>Se(b().elapsedSeconds),()=>o().rmssd.toFixed(1),()=>Se(b().elapsedSeconds),()=>({"has-value":s(k).hr!=="-"}),()=>({"has-value":s(k).rmssd!=="-"}),()=>({"has-value":s(k).vibe!=="-"}),()=>({inhale:s(T)==="inhale",exhale:s(T)==="exhale"})],st),Be(1,I,()=>He,()=>({duration:150})),Be(1,ce,()=>He,()=>({duration:150})),Be(1,ve,()=>He,()=>({duration:150})),pe("click",xt,dt),B(c,p)};L(Ne,c=>{s(A)?c(ht,!1):c(bt)})}var pt=n(Ne,2);{var mt=c=>{var p=ns(),u=e(p),v=n(e(u),2),d=e(v),i=n(e(d),2),P=e(i,!0);t(i),t(d);var y=n(d,2),C=n(e(y),2),K=e(C);t(C),t(y);var N=n(y,2),q=n(e(N),2),Q=e(q);t(q),t(N);var X=n(N,2),oe=n(e(X),2),Y=e(oe,!0);t(oe),t(X),t(v);var Z=n(v,2);{var ye=D=>{var R=rs(),U=e(R,!0);t(R),he(()=>f(U,s(j))),B(D,R)};L(Z,D=>{s(j)&&D(ye)})}var ee=n(Z,2),M=e(ee),De=e(M);{var te=D=>{var R=Ie("Saving...");B(D,R)},ie=(D,R)=>{{var U=I=>{var z=Ie("Saved!");B(I,z)},se=I=>{var z=Ie("Save Session");B(I,z)};L(D,I=>{s(ne)?I(U):I(se,!1)},R)}};L(De,D=>{s(J)?D(te):D(ie,!1)})}t(M);var le=n(M,2);t(ee),t(u),t(p),he((D,R)=>{f(P,D),f(K,`${s(S).avgHR??""} bpm`),f(Q,`${R??""} ms`),f(Y,s(S).avgVibe),M.disabled=s(J)||s(ne),le.disabled=s(J)||s(ne)},[()=>Se(s(S).durationSeconds),()=>s(S).avgRMSSD.toFixed(1)],st),pe("click",M,vt),pe("click",le,ut),B(c,p)};L(pt,c=>{s(G)&&s(S)&&c(mt)})}t(we);var gt=n(we,2);qt(gt,{onClose:()=>Ve("/history")}),B(l,Oe),Ut(),m()}export{Rs as component};
