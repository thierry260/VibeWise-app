import{t as n,a as l}from"../chunks/CBOLqkOR.js";import{i as ce}from"../chunks/DYliPJ25.js";import{p as de,o as pe,b as ue,s as b,m as F,e as p,c as t,g as a,r as s,t as w,d as M}from"../chunks/Gd2MJtJw.js";import{s as i}from"../chunks/6F2tKI9t.js";import{i as y}from"../chunks/DEjGzwbK.js";import{e as _e,i as me}from"../chunks/DyHPtUt5.js";import{s as fe,a as xe}from"../chunks/7oYGK_Th.js";import{a as he}from"../chunks/BPWvYGMB.js";import{a as ge}from"../chunks/x9z02Rao.js";var ye=n('<div class="loading svelte-1lq8rex">Loading your sessions...</div>'),qe=n('<div class="error-message svelte-1lq8rex"> </div>'),Se=n(`<div class="empty-state svelte-1lq8rex"><p>You haven't created any sessions yet.</p> <p>Start by creating a reflection or HRV session!</p></div>`),be=n('<div class="session-content svelte-1lq8rex"><p class="mood svelte-1lq8rex"> </p> <p class="text-preview svelte-1lq8rex"> </p></div>'),we=n('<div class="session-content svelte-1lq8rex"><p class="hrv-stats svelte-1lq8rex"><span> </span> <span> </span></p></div>'),He=n('<div class="session-card svelte-1lq8rex"><div class="session-icon svelte-1lq8rex"> </div> <div class="session-details svelte-1lq8rex"><div class="session-header svelte-1lq8rex"><span class="session-type svelte-1lq8rex"> </span> <span class="session-time svelte-1lq8rex"> </span></div> <div class="session-date svelte-1lq8rex"> </div> <!></div></div>'),Re=n('<div class="sessions-list svelte-1lq8rex"></div>'),De=n('<div class="history-container svelte-1lq8rex"><h1 class="svelte-1lq8rex">Session History</h1> <div class="coming-soon-banner svelte-1lq8rex"><p class="svelte-1lq8rex">Full history view will be available in Phase 4</p> <p class="subtitle svelte-1lq8rex">This is a placeholder for the upcoming Session History feature</p></div> <!></div>');function je(N,P){de(P,!1);const[Y,z]=fe(),U=()=>xe(he,"$authStore",Y);let H=F([]),$=F(!0),q=F(null);pe(async()=>{if(U().user)try{const e=await ge(U().user,10);e.success&&e.sessions?b(H,e.sessions):b(q,"Failed to load recent sessions.")}catch(e){console.error("Error loading sessions:",e),b(q,"An unexpected error occurred while loading sessions.")}finally{b($,!1)}});function C(e){return new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric",year:"numeric"})}function G(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}function J(e){switch(e){case"reflection":return"🖊️";case"hrv_session":return"📈";case"balcony":return"🧠";default:return"📝"}}function K(e){switch(e){case"reflection":return"Reflection";case"hrv_session":return"HRV Session";case"balcony":return"Balcony Experiment";default:return"Session"}}ce();var R=De(),O=p(t(R),4);{var Q=e=>{var f=ye();l(e,f)},W=(e,f)=>{{var X=u=>{var x=qe(),D=t(x,!0);s(x),w(()=>i(D,a(q))),l(u,x)},Z=(u,x)=>{{var D=_=>{var h=Se();l(_,h)},ee=_=>{var h=Re();_e(h,5,()=>a(H),me,(se,r)=>{var L=He(),T=t(L),te=t(T,!0);s(T);var j=p(T,2),E=t(j),V=t(E),ae=t(V,!0);s(V);var B=p(V,2),re=t(B,!0);s(B),s(E);var k=p(E,2),ie=t(k,!0);s(k);var oe=p(k,2);{var le=o=>{var v=be(),c=t(v),d=t(c,!0);s(c);var m=p(c,2),S=t(m);s(m),s(v),w((g,A)=>{i(d,g),i(S,`${A??""}${a(r).text.length>100?"...":""}`)},[()=>a(r).mood.join(", "),()=>a(r).text.substring(0,100)],M),l(o,v)},ne=(o,v)=>{{var c=d=>{var m=we(),S=t(m),g=t(S),A=t(g);s(g);var I=p(g,2),ve=t(I);s(I),s(S),s(m),w(()=>{i(A,`Avg HR: ${a(r).avg_hr??""} bpm`),i(ve,`Vibe Score: ${a(r).vibe_score??""}`)}),l(d,m)};y(o,d=>{a(r).type==="hrv_session"&&d(c)},v)}};y(oe,o=>{a(r).type==="reflection"?o(le):o(ne,!1)})}s(j),s(L),w((o,v,c,d)=>{i(te,o),i(ae,v),i(re,c),i(ie,d)},[()=>J(a(r).type),()=>K(a(r).type),()=>G(a(r).timestamp),()=>C(a(r).timestamp)],M),l(se,L)}),s(h),l(_,h)};y(u,_=>{a(H).length===0?_(D):_(ee,!1)},x)}};y(e,u=>{a(q)?u(X):u(Z,!1)},f)}};y(O,e=>{a($)?e(Q):e(W,!1)})}s(R),l(N,R),ue(),z()}export{je as component};
