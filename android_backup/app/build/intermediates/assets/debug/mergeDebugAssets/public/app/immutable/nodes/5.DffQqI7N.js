import{c as st,a as s,t as l,n as Mt,b as St}from"../chunks/CGUOcUo0.js";import{i as Tt}from"../chunks/Dt1eVU8n.js";import{p as Lt,o as Ct,f as j,a as Et,s as i,m as w,g as v,b as a,c as t,r as e,t as k,n as zt}from"../chunks/CVH_N3Bp.js";import{e as J,s as T}from"../chunks/CWBwmAxe.js";import{i as g}from"../chunks/ChmHwF9y.js";import{s as Bt}from"../chunks/CZ47TB2n.js";import{s as Dt,a as it}from"../chunks/mJBMWFaA.js";import{a as ot,s as Pt}from"../chunks/CKXrGhkk.js";import{t as nt}from"../chunks/ChpRqV9_.js";import{g as Ut}from"../chunks/DF6Fe3K5.js";import{a as Wt,g as jt,s as At}from"../chunks/BSGaGtWC.js";var Vt=l('<div class="loading-state">Loading settings...</div>'),Ot=l('<div class="unauth-state">You are not logged in. <a href="/login">Go to login</a>.</div>'),Rt=l('<span class="text-xl">‚òÄÔ∏è</span>'),Ft=l('<span class="text-xl">üåô</span>'),It=Mt('<svg class="-ml-1 mr-2 h-4 w-4 animate-spin text-white" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ',1),Gt=l('<div class="mt-4 rounded-lg bg-green-50 p-4 dark:bg-green-900/20"><div class="flex items-center"><div class="mr-3 h-4 w-4 text-green-400"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <div><p class="text-sm font-medium text-green-800 dark:text-green-200">Notification sent!</p> <p class="mt-1 text-xs text-green-700 dark:text-green-300"> </p></div></div></div>'),Ht=l('<div class="mt-4 rounded-lg bg-red-50 p-4 dark:bg-red-900/20"><div class="flex items-center"><div class="mr-3 h-4 w-4 text-red-400"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div><p class="text-sm font-medium text-red-800 dark:text-red-200">Error sending notification</p> <p class="mt-1 text-xs text-red-700 dark:text-red-300"> </p></div></div></div>'),Yt=l(`<div class="mb-4 flex items-center space-x-2"><div class="h-3 w-3 rounded-full bg-green-500"></div> <span class="text-sm text-gray-700 dark:text-gray-300">Notifications enabled</span></div> <p class="mb-4 text-sm text-gray-600 dark:text-gray-400">VibeWise will send you 4 gentle reminders each day between 7:00 AM and 10:30 PM to pause
						and reflect.</p> <button class="relative mb-2 inline-flex items-center justify-center rounded-lg bg-gradient-to-r from-primary-600 to-secondary-500 px-4 py-2 font-medium text-white shadow-sm transition-all hover:from-primary-700 hover:to-secondary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"><!></button> <!> <!>`,1),qt=l('<div class="mb-4 flex items-center space-x-2"><div class="h-3 w-3 rounded-full bg-yellow-500"></div> <span class="text-sm text-gray-700 dark:text-gray-300">Notifications not enabled</span></div> <p class="mb-4 text-sm text-gray-600 dark:text-gray-400">Enable notifications to receive Divine Timing reminders throughout your day.</p> <a href="/notification-permission" class="inline-block rounded-lg bg-gradient-to-r from-primary-600 to-secondary-500 px-4 py-2 font-medium text-white shadow-sm transition-all hover:from-primary-700 hover:to-secondary-600 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">Enable Notifications</a>',1),Jt=l(`<div class="rounded-lg border border-yellow-200 bg-yellow-50 p-4 text-sm text-yellow-800 dark:border-yellow-700/30 dark:bg-yellow-900/20 dark:text-yellow-500"><p>Notifications are not supported in your browser. Try the mobile app for the full
						VibeWise experience.</p></div>`),Kt=l('<img alt="Profile" class="h-12 w-12 rounded-full">'),Qt=l('<div class="flex h-12 w-12 items-center justify-center rounded-full bg-primary-100 font-bold text-primary-700 dark:bg-primary-900/30 dark:text-primary-300"> </div>'),Xt=l('<div class="mb-6 flex items-center space-x-4"><!> <div><div class="font-medium text-gray-900 dark:text-white"> </div> <div class="text-sm text-gray-500 dark:text-gray-400"> </div></div></div>'),Zt=l('<div class="settings-page mx-auto max-w-2xl space-y-8 p-4"><h1 class="mb-8 text-2xl font-bold text-gray-900 dark:text-white">Settings</h1> <div class="rounded-lg bg-white p-6 shadow-md dark:bg-gray-800"><h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Appearance</h2> <div class="flex items-center justify-between"><span class="text-gray-700 dark:text-gray-300">Dark Mode</span> <button class="theme-toggle rounded-full p-2 focus:outline-none" aria-label="Toggle theme"><!></button></div></div> <div class="rounded-lg bg-white p-6 shadow-md dark:bg-gray-800"><h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Divine Timing</h2> <!></div> <div class="rounded-lg bg-white p-6 shadow-md dark:bg-gray-800"><h2 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Account</h2> <!> <button class="w-full rounded-lg border border-red-300 bg-white py-2 font-medium text-red-600 transition-colors hover:bg-red-50 dark:border-red-700 dark:bg-transparent dark:text-red-400 dark:hover:bg-red-900/20">Sign Out</button></div></div>');function ce(lt,dt){Lt(dt,!1);const[K,ct]=Dt(),Q=()=>it(nt,"$theme",K),m=()=>it(ot,"$authStore",K);let X="",Z=w("default"),L=w(!1),A=w(!1),V=w(!0);const vt=()=>{nt.set(Q()==="dark"?"light":"dark")};Ct(()=>{const o=ot.subscribe(M=>{var b;X=((b=M.user)==null?void 0:b.uid)||""});return(async()=>{i(V,Wt()),v(V)&&i(Z,await jt())})(),()=>o()});const gt=async()=>{await Pt(),Ut("/login")};let $=w(""),x=w(""),C=w("");const mt=async()=>{try{i(L,!0),i(x,"Preparing notification test..."),i(C,""),console.log("Current platform:",void 0),console.log("Running notification test from settings page");const o=["Take a breath and notice how you feel right now.","What emotion is present for you in this moment?","Notice the energy flowing through your body.","Find the still point within you, even if just for a moment.","Where is your mind right now? Bring it back to your body.","Breathe in awareness, breathe out tension.","What is one thing you can appreciate in this moment?"],N=Math.floor(Math.random()*o.length),M=o[N];i($,M),i(x,"Checking notification permission...");const b=await At({title:"Divine Timing",body:M,icon:"/icons/192x192-icon.png",data:{userId:X}});console.log("Notification test result:",b),b?(i(x,"Notification sent successfully!"),i(A,!0),setTimeout(()=>{i(A,!1),i(x,"")},5e3)):(i(x,"Failed to send notification. Check console for details."),i(C,"There was a problem sending the notification. Please check your browser settings or try again.")),i(L,!1)}catch(o){console.error("Error sending test notification:",o),i(L,!1),i(x,"Error encountered"),i(C,o instanceof Error?o.message:"Unknown error occurred")}};Tt();var tt=st(),ft=j(tt);{var ut=o=>{var N=Vt();s(o,N)},pt=(o,N)=>{{var M=S=>{var E=Ot();s(S,E)},b=S=>{var E=Zt(),O=a(t(E),2),et=a(t(O),2),R=a(t(et),2),ht=t(R);{var xt=r=>{var d=Rt();s(r,d)},bt=r=>{var d=Ft();s(r,d)};g(ht,r=>{Q()==="dark"?r(xt):r(bt,!1)})}e(R),e(et),e(O);var F=a(O,2),yt=a(t(F),2);{var _t=r=>{var d=st(),D=j(d);{var I=f=>{var p=Yt(),y=a(j(p),4),P=t(y);{var H=n=>{var c=It(),_=a(j(c),1,!0);k(()=>T(_,v(x)||"Sending...")),s(n,c)},h=n=>{var c=St("Test Notification");s(n,c)};g(P,n=>{v(L)?n(H):n(h,!1)})}e(y);var u=a(y,2);{var Y=n=>{var c=Gt(),_=t(c),z=a(t(_),2),B=a(t(z),2),q=t(B);e(B),e(z),e(_),e(c),k(()=>T(q,`"${v($)??""}"`)),s(n,c)};g(u,n=>{v(A)&&n(Y)})}var U=a(u,2);{var W=n=>{var c=Ht(),_=t(c),z=a(t(_),2),B=a(t(z),2),q=t(B,!0);e(B),e(z),e(_),e(c),k(()=>T(q,v(C))),s(n,c)};g(U,n=>{v(C)&&n(W)})}k(()=>y.disabled=v(L)),J("click",y,mt),s(f,p)},G=f=>{var p=qt();zt(4),s(f,p)};g(D,f=>{v(Z)==="granted"?f(I):f(G,!1)})}s(r,d)},wt=r=>{var d=Jt();s(r,d)};g(yt,r=>{v(V)?r(_t):r(wt,!1)})}e(F);var at=a(F,2),rt=a(t(at),2);{var kt=r=>{var d=Xt(),D=t(d);{var I=h=>{var u=Kt();k(()=>Bt(u,"src",m().user.photoURL)),s(h,u)},G=h=>{var u=Qt(),Y=t(u,!0);e(u),k(()=>{var U,W;return T(Y,((U=m().user.displayName)==null?void 0:U[0])||((W=m().user.email)==null?void 0:W[0])||"U")}),s(h,u)};g(D,h=>{m().user.photoURL?h(I):h(G,!1)})}var f=a(D,2),p=t(f),y=t(p,!0);e(p);var P=a(p,2),H=t(P,!0);e(P),e(f),e(d),k(()=>{T(y,m().user.displayName||"User"),T(H,m().user.email)}),s(r,d)};g(rt,r=>{m().user&&r(kt)})}var Nt=a(rt,2);e(at),e(E),J("click",R,vt),J("click",Nt,gt),s(S,E)};g(o,S=>{m().user?S(b,!1):S(M)},N)}};g(ft,o=>{m().loading?o(ut):o(pt,!1)})}s(lt,tt),Et(),ct()}export{ce as component};
